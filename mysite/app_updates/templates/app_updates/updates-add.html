<!-- mysite/app_updates/templates/app_updates/updates-add.html -->
{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock title %}
{% block body %}
<style>
.compact-form-card {
    max-width: 600px;
    margin: 2rem auto;
    border: 1px solid #ffcc00;
}
.compact-form-card .card-header {
    background-color: #1a1a1a;
    color: #ffcc00;
    padding: 0.75rem 1rem;
}
</style>

<div class="container py-3">
    <div class="compact-form-card">
        <div class="card-header">
            <h5 class="mb-0"><i class="fas fa-plus-circle me-2"></i>{{ title }}</h5>
        </div>
        <div class="card-body p-3">

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show small mb-3 p-2" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close p-0" style="font-size: 0.8rem;" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <form method="post">
                {% csrf_token %}
                <div class="mb-3">
                    {{ form.name.label_tag }}
                    {{ form.name }}
                    {% if form.name.errors %}<div class="text-danger">{{ form.name.errors }}</div>{% endif %}
                </div>
                <div class="mb-3">
                    {{ form.schedule.label_tag }}
                    {{ form.schedule }}
                    {% if form.schedule.errors %}<div class="text-danger">{{ form.schedule.errors }}</div>{% endif %}
                </div>
                <div class="mb-3">
                    {{ form.url_input.label_tag }}
                    {{ form.url_input }}
                    {% if form.url_input.errors %}<div class="text-danger">{{ form.url_input.errors }}</div>{% endif %}
                </div>
                <div class="mb-3">
                    {{ form.description.label_tag }}
                    {{ form.description }}
                    {% if form.description.errors %}<div class="text-danger">{{ form.description.errors }}</div>{% endif %}
                </div>
                <!-- ... после description ... -->
<div class="mb-3">
    {{ form.main_column_id.label_tag }}
    {{ form.main_column_id }}
    {% if form.main_column_id.help_text %}
        <small class="form-text text-muted">{{ form.main_column_id.help_text }}</small>
    {% endif %}
    {% if form.main_column_id.errors %}
        <div class="text-danger">{{ form.main_column_id.errors }}</div>
    {% endif %}
</div>
<div class="mb-3">
    {{ form.sub_column_id.label_tag }}
    {{ form.sub_column_id }}
    {% if form.sub_column_id.help_text %}
        <small class="form-text text-muted">{{ form.sub_column_id.help_text }}</small>
    {% endif %}
    {% if form.sub_column_id.errors %}
        <div class="text-danger">{{ form.sub_column_id.errors }}</div>
    {% endif %}
</div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-warning">
                        <i class="fas fa-save me-1"></i>Сохранить метод
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock body %}