{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}

{% block body %}
<style>
    .bg-custom-black { background-color: #000000 !important; }
    .btn-custom {
        background-color: #808080 !important;
        border-color: #808080 !important;
        color: white !important;
        transition: all 0.3s ease;
    }
    .btn-custom:hover, .btn-custom:active, .btn-custom:focus {
        background-color: #ff0000 !important;
        border-color: #ff0000 !important;
        box-shadow: 0 0 0 0.25rem rgba(255, 0, 0, 0.25);
    }
    .table-striped-custom tbody tr:nth-child(odd) { background-color: #ffffff !important; }
    .table-striped-custom tbody tr:nth-child(even) { background-color: #ffff99 !important; }
</style>

<h1 class="text-center my-4">{{ title }}</h1>

<div class="container">
    <!-- Фильтры -->
    <div class="card bg-custom-black text-white mb-4">
        <div class="card-body">
            <form method="get" class="form-inline">
                <div class="d-flex flex-wrap align-items-center">
                    {% for field in filter.form %}
                    <div class="me-3 mb-2">
                        {{ field.label_tag }}
                        {{ field }}
                    </div>
                    {% endfor %}
                    <div class="ms-auto mb-2">
                        <button type="submit" class="btn btn-custom me-2">Применить</button>
                        <a href="?" class="btn btn-custom">Сбросить</a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Таблица -->
    {% if page_obj %}
    <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped-custom">
            <thead class="bg-custom-black text-white">
            <tr>
                <th>#</th>
                <th>Тип базы</th>
                <th>База данных</th>
                <th>Схема</th>
                <th>Таблица</th>
                <th>Тип таблицы</th>
                <th>Статус</th>
            </tr>
            </thead>
            <tbody>
            {% for schema_table in schema_tables %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ schema_table.base_schema.base.type.name }}</td>
                <td>{{ schema_table.base_schema.base.name }}</td>
                <td>{{ schema_table.base_schema.schema.name }}</td>
                <td>
                    <a href="{% url 'my_metla:table-detail' pk=schema_table.id %}">
                        {{ schema_table.table.name }}
                    </a>
                </td>
                <td>{{ schema_table.table_type.name }}</td>
                <td>
                        <span class="badge bg-{% if schema_table.is_active %}success{% else %}danger{% endif %}">
                            {% if schema_table.is_active %}Активна{% else %}Неактивна{% endif %}
                        </span>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-warning">Нет данных для отображения</div>
    {% endif %}
</div>
{% endblock %}
